
@model IEnumerable<TicketBook.DataAccessLayer.DomainModel.Flight>

@{
    ViewBag.Title = "Search Result";
}

<h1>&nbsp;</h1>
<div class="container">
    <div class="row">
        @if (ViewBag.Error != null)
        {
            <div class="alert alert-danger">
                @((string)ViewBag.Error)
                @Html.ActionLink("Main page", "Index", null, new { @class = "btn" })
            </div>
        }
        else
        {
            if (Model.Count() != 0)
            {
                <ul class="list-group">
                    @foreach (var flight in Model)
                    {
                        <li class="list-group-item">
                            <div class="row">
                                <div class="col-md-10">
                                    <h3>Рейс: @flight.DepartureCity.Name - @flight.ArrivalCity.Name</h3>
                                </div>
                                <div class="col-md-2">
                                    <button class="btn btn-info btn-lg" type="button" data-toggle="modal" data-target="#myModal" style="margin-top:15px; background:#14c91c;">Order ticket</button>
                                    <div id="myModal" class="modal fade">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <div class="panel-heading">Ordering</div>
                                                </div>
                                                <div class="modal-body">
                                                    <div class="alert alert-danger">
                                                        <strong>You can`t order ticket!</strong> Please log in.
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <div class="container">
                                                        <div class="row">
                                                            <div class="footer">
                                                                <button type="button" class="btn btn-info">Buy</button>
                                                                <button class="btn btn-default" type="button" data-dismiss="modal">Close</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr />
                            <h4>Departure time: @flight.DepartureTime.ToString(@"MM\/dd\/yyyy HH:mm")</h4>
                            <h4>Arrival time: @flight.ArivalTime.ToString(@"MM\/dd\/yyyy HH:mm")</h4>                           
                        </li>
                        <h3>&nbsp;</h3>
                    }
                </ul>
            }
            else
            {
                <div class="alert alert-warning">Unfortunately for the specified parameters there are no flights @Html.ActionLink("На главную", "Index", null, new { @class = "btn" }) </div>
            }
        }



    </div>
</div>